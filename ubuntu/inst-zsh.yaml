---
# ðŸ§© Playbook: inst-zsh.yaml
# ðŸ“˜ Description:
# Installs the Z Shell (zsh) package on selected Ubuntu/Debian-based hosts.
#
# ðŸ”§ Notes:
# - Targets hosts specified via the `target_group` variable.
# - Requires sudo privileges.
# - Compatible with Debian/Ubuntu systems using `apt`.
#
# ðŸ§  Example usage:
# ansible-playbook -i inventory.ini ./ubuntu/inst-zsh.yaml -e "target_group=UbuntuServers"

- name: Install zsh
  hosts: "{{ target_group | d([]) }}"
  become: true
  gather_facts: true

  tasks:
    - name: Fail if target_group is not defined
      ansible.builtin.fail:
        msg: "You must specify 'target_group' (e.g., -e 'target_group=UbuntuServers')"
      when: target_group is not defined

    - name: Install zsh
      ansible.builtin.apt:
        name: zsh
        state: present
        update_cache: true
      become: true
